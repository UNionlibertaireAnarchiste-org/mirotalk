<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>MiroTalk Iframe</title>
        <style>
            body { margin: 0; padding: 0; }
            #meet { width: 100vw; height: 100vh; border: none; }
        </style>
    </head>
    <body>
        <iframe id="meet" src="/" allow="camera; microphone; display-capture"></iframe>
        <script>
            // Auto-detect P2P vs SFU and redirect
            fetch('/api/v1/stats').then(r => r.ok ? 
                document.getElementById('meet').src = '/join/test' : // P2P
                document.getElementById('meet').src = '/?room=test'   // SFU
            ).catch(() => document.getElementById('meet').src = '/?room=test');
        </script>
    </body>
</html>
